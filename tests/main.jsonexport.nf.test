nextflow_process {

    name "Test Process jsonExport"
    script "main.nf"
    process "jsonExport"

    test("Should export json") {

        when {
            params {

            }
            process {
                """
                input[0] = ['test', 
                            file("${projectDir}/tests/data/MP-rooted.nwk"),
                            file("${projectDir}/tests/data/phylo.json"),
                            file("${projectDir}/tests/data/cladeMeta_exp.csv"),
                            file("${projectDir}/tests/data/locations.tsv"),
                            file("${projectDir}/tests/data/config.json"),
                            file("${projectDir}/accessory/custom-colours.tsv")  ]
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
